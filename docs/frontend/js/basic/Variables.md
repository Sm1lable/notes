# 变量，作用域和内存

内容提要

-   通过变量使用原始值和引用之
-   理解执行上下文
-   理解**垃圾回收**

## 原始值与引用值

要注意的是，字符串在JavaScript中是原始值。

### 值的复制

原始值复制时，原始值的值会被复制到新的变量的位置，两个变量拥有不同的内存空间。

```js
let num1 = 5
let num2 = num1
```

执行上述代码后，会在内存中开辟两块空间，分别存储了`num1`和`num2`，他们在内存中存储的值都是5。

引用值在复制时，会将引用指向对象的堆内存地址指针进行复制，因此他们会指向同一个引用对象。

```js
let obj1 = {}
let obj2 = obj1
obj1.name = "Mike"
console.log(obj2.name) // 'Mike'
```

`obj1`和`obj2`在栈内存中的地址虽然不一样，但是他们的值相同，这个值指向堆内存中的一个对象。

### 参数传递

原始值和引用值都会传递一个复制值进入函数，作为函数作用域下的本地变量。
对原始值的修改不会影响外部变量；虽然引用变量是一个本地变量，由于和外部变量引用的是同一个
对象，因此对对象属性的修改会影响到外部变量，而对这个本地变量直接重新赋值不会影响外部变量。

```js
function setName(obj) {
    obj.name = "Mike" // 影响原对象
    obj = new Object() // 不影响原对象
    obj.name = "Jack"
}
obj = new Object()
obj.name = "John"

setName(obj)

console.log(obj.name) // Mike
```

上述例子中，`obj`是函数`setName`的本地变量，在函数执行完毕后销毁，对其进行新赋值也不会影响到外部变量。

## 执行上下文与作用域
